\subsection{EtherCAT}
%zasada działania
%topologia
%źródła opóźnień
%wady/zalety
%itd.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%EtherCAT jest nowoczesnym protokołem sieciowym przeznaczonym do stosowania w~aplikacjach przemysłowych, szczególnie takich, które wymagają działania całego systemu w~czasie rzeczywistym. Nazwa standardu jest skrótem od hasła: „Ethernet for Control Automation Technology”. W~zakresie warstwy fizycznej bazuje na~Ethernecie. Dodatkowo zaimplementowano w!nim mechanizmy w zakresie organizacji transmisji danych pozwalające na!ominięcie głównych ograniczeń sieci Ethernet. Dzięki temu EtherCAT jest obecnie jednym z~popularniejszych oraz szybciej rozwijających się protokołów komunikacyjnych w przemyśle.

\subsubsection{Determinizm, przepustowość}

\subsubsection{Przetwarzanie ,,w locie''}
%W dużej części aplikacji przemysłowych dane mają mały rozmiar rzędu pojedynczych bajtów. Wykorzystując standardowy Ethernet i~jego ramki stosunek danych użytecznych do narzutu protokołu jest bardzo nie korzystny. Zatem zamiast standardowej dla Ethernetu transmisji pakietowej z~koniecznością odtwarzania pofragmentowanych danych zastosowano mechanizm wykorzystujący telegramy zbudowane z datagramów. W takim podejściu twórcy standardu EtherCAT potraktowali ramkę ethernetową jak pewnego rodzaju pamięć RAM, do której zapisywane i z~której odczytywane są dowolne informacje w~oparciu o~adresy lokalizujące pożądane dane w~tej pamięci.

%Dzięki takiemu podejściu protokół charakteryzuje się bardzo dużym wykorzystaniem kanału transmisyjnego w porównaniu do odpytywania w przedziale czasowym (ang. Pooling Timeslicing) oraz nadawania Master/Slave (ang. Broadcast Master/Slave) znanych ze~zwykłego EThernetu co pokazano na Rysunku~\ref{etherCAT:wykorzystanie}
%\input{tikz/wykorzystanie}

%Bardzo ważnym elementem węzła sieci jest tak zwana jednostka zarządzania pamięcią FMMU (ang. fieldbus memory management unit). Odpowiada ona między innymi za uniezależnienie szybkości transferu danych od wydajności i~mocy obliczeniowej jednostki lokalnej CPU, kontrolę ruchu bez opóźnień oraz za~odwzorowanie adresu logicznego na~adres fizyczny.

Kolejne ramki nadawane są przez urządzenie pełniące rolę kontrolera i przesyłane do najbliższego urządzenia podrzędnego. Urządzenie to ma przydzielony adres, który jednoznacznie identyfikuje pewien fragment ramki (zwany datagramem), dzięki czemu może odczytać przeznaczone dla siebie dane. W przypadku gdy urządzenie podrzędne samo chce zainicjować komunikację, zapisuje pod odpowiednim adresem w odebranej ramce informacje przeznaczone dla innego urządzenia podłączonego do sieci EtherCAT. Niezależnie od tego, czy urządzenie coś zapisało, czy też tylko odczytywało fragment ramki, przesyła ją dalej do kolejnego z urządzeń. Duża szybkość tej metody transmisji wynika m.in. z tego, że nie ma potrzeby dekodowania całej ramki danych ani enkapsulacji w protokoły TCP/IP danych zapisywanych. Pozwala to błyskawicznie przekazywać ramki pomiędzy urządzeniami.


%Wydajność tego rozwiązania jest dosyć duża, choć zależy od~liczby elementów podłączonych do sieci. W~praktyce czas opóźnienia nie wzrasta powyżej 1~ms i~zazwyczaj jest znacznie (kilku- lub kilkunastokrotnie) krótszy. Czas synchronizacji nie przekracza 1~$\mu s$. Niniejsza praca miała na celu przebadanie i~sprawdzenie czy faktycznie protokół działa tak dobrze jak zapewniają jego twórcy.

\subsubsection{Transmisja i synchronizacja w sieciach EtherCAT}

%Jako medium komunikacyjne w~sieciach EtherCAT można wykorzystać kable miedziane (100Base-TX), światłowody (100Base-FX) lub łącze E-bus w~technologii LVDS. Te~ostatnie wprowadzono ze~względu na~to, że~transmisja w~sieciach EtherCAT często jest realizowana na~krótkich dystansach - E-bus sprawdza się w~realizacji łączności na~odległość do~około 10 m. Kable miedziane sprawdzają~się na~większych odległościach nieprzekraczających 100 metrów, natomiast użyteczna długość światłowodów może dochodzić aż do 20 kilometrów.

\subsubsection{Telegram EtherCAT}
%Jako pokazano na Rysunku~\ref{etherCAT:ramka}, telegram EtherCAT jest inkapsulowany w  ramce Ethernet i  zawiera jeden lub więcej datagramów EtherCAT dostarczanych do urządzeń podrzędnych. 
\input{tikz/ramka} %
%Każdy datagram EtherCAT jest komendą, która zawiera zgodnie z Rysunkiem~\ref{etherCAT:datagram} nagłówek, dane i~licznik roboczy. Nagłówek i~dane są~używane do~wyspecyfikowania operacji, które muszą być wykonane przez węzeł podrzędny, natomiast licznik roboczy jest aktualizowany przez niego informując węzeł nadrzędny, że~odebrał on i~przetwarza komendę.
\input{tikz/datagram} %

\subsubsection{Synchronizacja}


%\subsubsection{EtherCAT Technology Group}
%\begin{figure}[!htb] 	\centering 	\includegraphics[width=0.3\textwidth]{images/logoETG} \caption{Logo EtherCAT Technology Group (http://www.ethercat.org).} \label{logoETG} \end{figure}
%
%Standard EtherCAT został opracowany w~2003 roku przez Beckhoff Automation, niemiecką firmę z~branży automatyki przemysłowej. Następnie powołano organizację EtherCAT Technology Group (ETG), która zajęła~się standaryzacją tego protokołu. Stowarzyszenie~to obecnie zajmuje~się też organizowaniem szkoleń oraz popularyzacją tego standardu. 
%
%Aktualnie w~skład ETG wchodzi ponad 2480 firm (dane na dzień 1~września~2013). Najważniejszym członkiem organizacji jest oczywiście firma BECKHOFF Automation. Pozostałe duże i~znane firmy wchodzące w~jej skład~to między innymi: ABB, Brother Industries, BMW Group, Częstochowa University of Technology, Epson, FANUC, Festo, GE Intelligent Platforms, Hitachi, Hochschule Ingolstadt, Mitsubishi, Microchip Technology, Mentor Graphics, Nikon, National Instruments, OLYMPUS, Panasonic, Rzeszów University of Technology, Red Bull Technology, Samsung Electronics, TRW Automotive, Volvo Group, Volkswagen oraz Xilinx.
%
%Jak widać na powyższej liście w~skład organizacji wchodzą firmy z~bardzo wielu branż, a~nawet ośrodki naukowe. Autor pracy wybrał duże i~dobrze znane sobie firmy, aby pokazać jak wiele firm interesuje~się rozwojem przemysłowych protokołów komunikacyjnych.

\subsubsection{}
\subsubsection{}
\input{tikz/topologia} %

